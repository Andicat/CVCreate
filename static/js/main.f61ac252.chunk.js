(this.webpackJsonpcreacv=this.webpackJsonpcreacv||[]).push([[0],{53:function(t,e,n){},54:function(t,e,n){"use strict";n.r(e);var a=n(2),o=n.n(a),i=n(25),r=n.n(i),c=n(10),s=n(29),l=n(22),u=n(4),p=n(5),d=n(7),b=n(6),h=n(12),f=n(56),j=n(11),m=n.n(j),v=n(15),O=n(20),k=n(3),g=n(1),_={font:"font",fontsize:"font Size",bold:"font Bold",italic:"font Italic",underline:"font Underline",uppercase:"font Uppercase",center:"align text to Center",color:"color of text",bgcolor:"background color",file:"load image",maincount:"count of first dots",addcount:"count of second dots",radius:"radius of dots",borderwidth:"width of border",bordercolor:"color of border",padding:"padding",opacity:"opacity",copy:"copy block",back:"send block on back",autosize:"set block size on Auto",lock:"lock block position",ungroup:"ungroup blocks",alignTop:"align blocks on top",alignBottom:"align blocks on bottom",alignLeft:"align blocks on left",alignRight:"align blocks on right",alignVertical:"align blocks on vertical",alignHorisontal:"align blocks on horisontal",distributeVertical:"distribute blocks on vertical",distributeHorisontal:"distribute blocks on horisontal",alignWidth:"set same width for blocks",alignHeight:"set same height for blocks",group:"group blocks",progress:"progress",height:"height",width:"width",link:"set link for block",save:"save this block to panel"},y=["PTSans","Roboto","Helvetica","Garamond"];function x(t,e,n){return"copy"===(t=C(t))||"back"===t||"autosize"===t||"ungroup"===t||"group"===t||"save"===t||t.indexOf("align")>=0||t.indexOf("distribute")>=0?function(t,e){return Object(g.jsx)("input",{type:"button",className:"option__button option__button--"+t,"data-tooltip":!0,onClick:e})}(t,n):"bold"===t||"italic"===t||"uppercase"===t||"underline"===t||"center"===t||"lock"===t?function(t,e){return Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("input",{type:"checkbox",className:"option__checkbox option__checkbox--"+t,id:t,checked:e,onChange:r}),Object(g.jsx)("label",{className:"option__label",htmlFor:t,"data-tooltip":!0})]})}(t,e):t.indexOf("color")>=0?function(t){return Object(g.jsx)("input",{type:"color",className:"option__color","data-tooltip":!0,value:t,onChange:i})}(e):"font"===t?function(t,e){return Object(g.jsx)("select",{className:"option__select","data-tooltip":!0,value:t,onChange:i,children:e.map((function(t,e){var n={fontFamily:t};return Object(g.jsx)("option",{style:n,children:t},e)}))})}(e,y):"fontsize"===t?u(e,6,60):"progress"===t?p(t,e,0,100,1):"file"===t?Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("input",{type:"file",name:"file",id:"file",className:"option__file",accept:"image/*",onChange:c}),Object(g.jsx)("label",{className:"option__label option__label--file",htmlFor:"file","data-tooltip":!0,children:"Load Image"})]}):"padding"===t?function(t,e,n,a){return Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("input",{type:"button",className:"option__button option__down option__button--"+t,"data-tooltip":!0,onClick:function(t){l(t.target.nextSibling,!0)},onMouseLeave:function(t){return function(t,e){t.relatedTarget!==e&&l(e,!1)}(t,t.currentTarget.nextSibling)}}),Object(g.jsx)("form",{name:t,className:"option__drop-down",onMouseLeave:function(t){return l(t.currentTarget,!1)},children:Object.keys(e).map((function(t,o){return Object(g.jsxs)("div",{className:"option__drop-down-line",children:[Object(g.jsx)("span",{children:t}),Object(g.jsx)("input",{type:"button",className:"option__button option__button--left",value:"\u2013",onClick:function(n){s(n.target.nextSibling,Number(e[t])-1,e,t)}}),Object(g.jsx)("input",{type:"text",className:"option__number",min:n,max:a,value:e[t],readOnly:!0}),Object(g.jsx)("input",{type:"button",className:"option__button option__button--right",value:"+",onClick:function(n){s(n.target.previousSibling,Number(e[t])+1,e,t)}})]},o)}))})]})}(t,e,0,100):"opacity"===t?p(t,e,0,1,.01):"link"===t?function(t,e){return Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("input",{type:"button",className:"option__button option__down option__button--"+t,"data-tooltip":!0,onClick:function(t){l(t.target.nextSibling,!0)}}),Object(g.jsx)("div",{className:"option__drop-down",onMouseLeave:function(t){return l(t.currentTarget,!1)},children:Object(g.jsxs)("div",{className:"option__drop-down-line",children:[Object(g.jsx)("span",{children:"Link:"}),Object(g.jsx)("input",{type:"text",className:"option__text option__link",defaultValue:e}),Object(g.jsx)("button",{className:"option__button option__button--ok",onClick:function(t){var e;e=t.target.previousSibling,n(e.value),l(e.parentNode.parentNode,!1)}})]})})]})}(t,e):"maincount"===t||"addcount"===t||"radius"===t||"borderwidth"===t?u(e,0,100):null;function a(t,e){if(t){var a=t.min?Number(t.min):0,o=t.max?Number(t.max):1/0;e>=a&&e<=o&&n(e)}}function i(t){n(t.target.value)}function r(t){n(t.target.checked)}function c(t){var e=new FileReader,a=t.target.files[0];e.onloadend=function(){n(e.result)},a&&e.readAsDataURL(a)}function s(t,e,a,o){if(t){var i=t.min?Number(t.min):0,r=t.max?Number(t.max):1/0;if(e>=i&&e<=r){var c=Object(k.a)({},a);return c[o]=e,void n(c)}}}function l(t,e){e&&!t.classList.contains("option__drop-down--show")&&t.classList.add("option__drop-down--show"),e||t.classList.remove("option__drop-down--show")}function u(t,e,n){return Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("input",{type:"button",className:"option__button option__button--left","data-tooltip":!0,value:"\u2013",onClick:function(e){a(e.target.nextSibling,Number(t)-1)}}),Object(g.jsx)("input",{type:"text",className:"option__number","data-tooltip":!0,min:e,max:n,value:t,readOnly:!0}),Object(g.jsx)("input",{type:"button",className:"option__button option__button--right","data-tooltip":!0,value:"+",onClick:function(e){a(e.target.previousSibling,Number(t)+1)}})]})}function p(t,e,n,a,r){return Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("input",{type:"button",className:"option__button option__down option__button--"+t,"data-tooltip":!0,onClick:function(t){l(t.target.nextSibling,!0)}}),Object(g.jsx)("div",{className:"option__drop-down",onMouseLeave:function(t){return l(t.currentTarget,!1)},children:Object(g.jsx)("div",{className:"option__drop-down-line",children:Object(g.jsx)("input",{type:"range",className:"option__range",min:n,max:a,step:r,value:e,onInput:i})})})]})}}function C(t){return t.replace(/.+_/,"")}function w(t){var e={};for(var n in t){var a=C(n);switch(a){case"font":e.fontFamily=t[n];break;case"fontsize":e.fontSize=t[n]+"px";break;case"bold":e.fontWeight=t[n]?"bold":"normal";break;case"italic":e.fontStyle=t[n]?"italic":"normal";break;case"uppercase":e.textTransform=t[n]?"uppercase":"none";break;case"underline":e.textDecoration=t[n]?"underline":"none";break;case"center":e.textAlign=t[n]?"center":"start";break;case"top":e.top=t[n]+"px";break;case"left":e.left=t[n]+"px";break;case"bgcolor":e.backgroundColor=t[n];break;case"bordercolor":e.borderColor=t[n];break;case"borderwidth":e.borderWidth=t[n]+"px";break;case"padding":e.padding=t[n].top+"px "+t[n].right+"px "+t[n].bottom+"px "+t[n].left+"px";break;default:e[a]=t[n]}}return e}function I(t){var e={},n=t.cloneNode(!0);return document.body.appendChild(n),n.style.position="absolute",n.style.visibility="hidden",n.style.height="auto",n.style.width="auto",n.style.boxSizing="border-box",e.height=n.scrollHeight,e.width=n.scrollWidth,document.body.removeChild(n),e}function N(t,e,n){t=JSON.stringify(t);var a=new Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,e);else{var o=document.createElement("a"),i=URL.createObjectURL(a);o.href=i,o.download=e,document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(i)}),0)}}function L(t){return B.apply(this,arguments)}function B(){return(B=Object(v.a)(m.a.mark((function t(e){var n,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FileReader,a={},n.readAsText(e),o=new Promise((function(t,e){n.onload=function(e){t(n.result)}})),t.next=6,o.then((function(t){a=JSON.parse(t)}));case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e){var n=E(t),a=Object(k.a)(Object(k.a)({},n),e);localStorage.setItem(t,JSON.stringify(a))}function E(t){var e=localStorage.getItem(t);if(e)return JSON.parse(e)}var S=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={tooltip:null},t.onChangeValue=function(e){t.props.cbOnChange(t.props.blockId,t.props.optionName,e)},t.onMouseOver=function(e){e.target.getAttribute("data-tooltip")&&t.setState({tooltip:_[t.props.optionName]})},t.onMouseOut=function(){t.setState({tooltip:null})},t}return Object(p.a)(n,[{key:"render",value:function(){var t=x(this.props.optionName,this.props.optionValue,this.onChangeValue);return t?Object(g.jsxs)("div",{className:"option",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.onMouseOut,children:[t,this.state.tooltip&&Object(g.jsx)("span",{className:"option__tooltip",children:this.state.tooltip})]}):null}}]),n}(o.a.PureComponent);S.defaultProps={blockId:0};var P=S,D="CV_BLOCK_ADD",V="CV_BLOCK_DELETE",A="CV_BLOCK_MOVE",M="CV_BLOCK_RESIZE",U="CV_BLOCK_ACTIVATE",F="CV_BLOCK_ACTIVATE_MULTI",K="CV_BLOCK_COPY",R="CV_BLOCK_SET_SIZE",z="CV_ELEMENT_ACTIVATE",H="CV_STYLE_UPDATE",G="CV_TEXT_UPDATE",W="CV_BLOCK_SEND_BACK",J="CV_BLOCKS_ALIGN_TOP",Y="CV_BLOCKS_ALIGN_BOTTOM",X="CV_BLOCKS_ALIGN_LEFT",Z="CV_BLOCKS_ALIGN_RIGHT",Q="CV_BLOCKS_ALIGN_VERTICAL",q="CV_BLOCKS_ALIGN_HORISONTAL",$="CV_BLOCKS_DISTRIBUTE_VERTICAL",tt="CV_BLOCKS_DISTRIBUTE_HORISONTAL",et="CV_BLOCKS_ALIGN_WIDTH",nt="CV_BLOCKS_ALIGN_HEIGHT",at="CV_BLOCKS_GROUP",ot="CV_BLOCK_UNGROUP",it="CV_BLOCK_LOCK",rt="CV_LOAD",ct="CV_INIT",st="CV_SET_USER",lt="CV_SET_LINK",ut="CV_BLOCK_LINK",pt="TEMPLATE_ADD",dt="TEMPLATE_DELETE",bt=function(t){return{type:D,block:t}},ht=function(t){return{type:V,blockId:t}},ft=function(t,e,n){return{type:A,blockId:t,shiftTop:e,shiftLeft:n}},jt=function(t,e,n){return{type:M,blockId:t,shiftHeight:e,shiftWidth:n}},mt=function(t,e,n){return{type:U,blockId:t,target:e,activeElem:n}},vt=function(t,e){return{type:z,elementId:e,style:t}},Ot=function(t,e,n){return{type:H,blockId:t,styleName:e,styleValue:n}},kt=function(t,e){return{type:G,blockId:t,textValue:e}},gt=function(t){return{type:W,blockId:t}},_t=function(t){return{type:K,blockId:t}},yt=function(t,e,n){return{type:R,blockId:t,width:n,height:e}},xt=function(t){return{type:F,blockId:t}},Ct=function(t){switch(t){case"top":return{type:J};case"bottom":return{type:Y};case"left":return{type:X};case"right":return{type:Z};case"vertical":return{type:Q};case"horisontal":return{type:q}}},wt=function(t){switch(t){case"vertical":return{type:$};case"horisontal":return{type:tt}}},It=function(t){switch(t){case"width":return{type:et};case"height":return{type:nt}}},Nt=function(){return{type:at}},Lt=function(t){return{type:ot,blockId:t}},Bt=function(t){return{type:it,blockId:t}},Tt=function(t,e){return{type:rt,blocks:t,style:e}},Et=function(t,e,n,a,o,i){return{type:ct,blocks:t,style:e,user:n,link:a,templatesData:o,templatesUser:i}},St=function(t){return{type:st,user:t}},Pt=function(t){return{type:lt,link:t}},Dt=function(t,e){return{type:ut,blockId:t,linkValue:e}},Vt=function(t){return{type:pt,blockId:t}},At=function(t){return{type:dt,index:t}},Mt=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).BLOCK_ACTION=["lock","autosize","back","copy","link","save"],t.BLOCKS_ACTION=["alignTop","alignBottom","alignLeft","alignRight","alignVertical","alignHorisontal","distributeVertical","distributeHorisontal","alignWidth","alignHeight","group"],t.setStyle=function(e,n,a){t.props.dispatch(Ot(e,n,a))},t.setAction=function(e,n,a){switch(n){case"alignTop":t.props.dispatch(Ct("top"));break;case"alignBottom":t.props.dispatch(Ct("bottom"));break;case"alignLeft":t.props.dispatch(Ct("left"));break;case"alignRight":t.props.dispatch(Ct("right"));break;case"alignVertical":t.props.dispatch(Ct("vertical"));break;case"alignHorisontal":t.props.dispatch(Ct("horisontal"));break;case"distributeVertical":t.props.dispatch(wt("vertical"));break;case"distributeHorisontal":t.props.dispatch(wt("horisontal"));break;case"alignWidth":t.props.dispatch(It("width"));break;case"alignHeight":t.props.dispatch(It("height"));break;case"group":t.props.dispatch(Nt()),t.setState({tooltip:null});break;case"lock":t.props.dispatch(Bt(e));break;case"autosize":if(t.props.activeBlockDOM){var o=I(t.props.activeBlockDOM);t.props.dispatch(yt(e,o.height,o.width))}break;case"back":t.props.dispatch(gt(e)),t.setState({tooltip:null});break;case"copy":t.props.dispatch(_t(e)),t.setState({tooltip:null});break;case"ungroup":t.props.dispatch(Lt(e)),t.setState({tooltip:null});break;case"link":t.props.dispatch(Dt(e,a));break;case"save":t.props.dispatch(Vt(e));break;default:return}},t}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e=null,n=null,a=null,o=Object(O.a)(this.BLOCK_ACTION);if(this.props.activeBlocksId.length>1)n=this.BLOCKS_ACTION.map((function(e,n){return Object(g.jsx)(P,{optionName:e,cbOnChange:t.setAction},n)}));else if(this.props.activeBlockOptions){if(this.props.activeBlockOptions.group&&o.push("ungroup"),n=o.map((function(e,n){var a=null;return"lock"===e?a=!!t.props.activeBlockOptions.lock:"link"===e&&(a=t.props.activeBlockOptions.link),Object(g.jsx)(P,{optionName:e,optionValue:a,blockId:t.props.activeBlockOptions.id,cbOnChange:t.setAction},"block-"+n)})),this.props.activeElementId)e=Object.keys(this.props.styleToEdit).sort().map((function(e,n){return Object(g.jsx)(P,{optionName:e,optionValue:t.props.styleToEdit[e],blockId:t.props.activeBlockOptions.id,cbOnChange:t.setStyle},"option-"+n)}))}else if(this.props.stylePage){a=Object.keys(this.props.stylePage).sort().map((function(e,n){return Object(g.jsx)(P,{optionName:e,optionValue:t.props.stylePage[e],blockId:1.1,cbOnChange:t.setStyle},n)}))}return Object(g.jsxs)("div",{className:"option-panel",children:[(a&&!n||e)&&Object(g.jsxs)("div",{className:"option-panel__group option-panel__group--style",children:[a,e]}),n&&Object(g.jsx)("div",{className:"option-panel__group option-panel__group--blocks",children:n}),null]})}}]),n}(o.a.PureComponent),Ut=Object(c.b)((function(t){return{stylePage:t.cvData.stylePage,styleToEdit:t.cvData.styleToEdit,activeElementId:t.cvData.activeElementId,activeBlocksId:t.cvData.activeBlocksId,activeBlockDOM:t.cvData.activeBlockDOM}}))(Mt),Ft=n(23),Kt=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).onClick=function(){t.props.editable&&t.props.dispatch(vt(t.props.data.style,t.props.id))},t.onBlur=function(e){var n=e.target.innerText;t.props.data.text!==n&&t.props.dispatch(kt(t.props.blockId,n))},t}return Object(p.a)(n,[{key:"render",value:function(){var t,e,a,o,i=this,r=this.props.activeElementId===this.props.id,s=w(this.props.data.style);this.props.data.link&&(e=s.top?s.top:this.props.data.positionTop+"px",a=s.left?s.left:this.props.data.positionLeft+"px",o=s.position,delete s.top,delete s.left,delete s.position);var l,u=this.props.data.type,p="cv__element cv__element--"+u+(r?" cv__element--active":"")+(this.props.data.direction?" cv__element--"+u+"-"+this.props.data.direction:""),d=null;switch(u){case"image":var b=this.props.data.style.file||this.props.templateImageUrl;d=Object(g.jsx)("img",{className:p,src:b,style:s,alt:"","data-elem":!0,onClick:this.onClick});break;case"text":var h=this.props.data.text;h instanceof Array&&(h=h.map((function(t,e){return Object(g.jsxs)("span",{children:[t,e<h.length-1&&Object(g.jsx)("br",{})]},e)}))),d=Object(g.jsx)("span",{className:p,style:s,suppressContentEditableWarning:this.props.editable,contentEditable:this.props.editable,"data-elem":!0,onClick:this.onClick,onBlur:this.onBlur,children:h});break;case"figure":d=Object(g.jsx)("div",{className:p,style:s,"data-elem":!0,onClick:this.onClick});break;case"progress":for(var f in l={},this.props.data.style)l[C(f)]=this.props.data.style[f];var j={backgroundColor:l.maincolor,width:l.progress+"%"},m=Object(g.jsx)("div",{style:j}),v={backgroundColor:l.addcolor,width:100-l.progress+"%"},O=Object(g.jsx)("div",{style:v});d=Object(g.jsxs)("div",{className:p,style:s,"data-elem":!0,onClick:this.onClick,children:[m,O]});break;case"dots-row":for(var _ in l={},this.props.data.style)l[C(_)]=this.props.data.style[_];var y={backgroundColor:l.maincolor,width:l.radius+"px",height:l.radius+"px",margin:"0 "+.5*l.radius+"px",borderRadius:"50%"},x=Array.from({length:l.maincount},(function(t,e){return Object(g.jsx)("div",{style:y},e)})),I=Object(k.a)(Object(k.a)({},y),{},{backgroundColor:l.addcolor}),N=Array.from({length:l.addcount},(function(t,e){return Object(g.jsx)("div",{style:I},e)}));d=Object(g.jsxs)("div",(t={className:p,style:s,"data-elem":!0},Object(Ft.a)(t,"data-elem",!0),Object(Ft.a)(t,"onClick",this.onClick),Object(Ft.a)(t,"children",[x,N]),t));break;case"group":var L=Object(c.b)(Rt)(n);d=Object(g.jsx)("div",{className:p,style:s,children:this.props.data.elements.map((function(t,e){return Object(g.jsx)(L,{id:""+(t.id?t.id:e),blockId:i.props.blockId,editable:i.props.editable,data:t,activeElementId:i.props.activeElementId},""+(t.id?t.id:e))}))});break;case"link":d=Object(g.jsx)("a",{className:p,style:s,href:this.props.data.href,suppressContentEditableWarning:this.props.editable,contentEditable:this.props.editable,"data-elem":!0,onClick:this.onClick,onBlur:this.onBlur,children:this.props.data.text});break;default:d=null}if(this.props.data.link){var B={position:o,top:e,left:a,width:this.props.data.width+"px",height:this.props.data.height+"px"};return Object(g.jsx)("a",{className:"cv__element--link",href:this.props.data.link,style:B,children:d})}return d}}]),n}(o.a.PureComponent);Kt.defaultProps={style:{}};var Rt=function(t){return{templateImageUrl:t.cvData.templateImageUrl}},zt=Object(c.b)(Rt)(Kt),Ht=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).onClickAdd=function(e){var n=I(e.target.previousSibling),a=JSON.parse(JSON.stringify(t.props.data));t.props.dispatch(bt(Object(k.a)(Object(k.a)({},a),{},{width:n.width,height:n.height})))},t.onClickDelete=function(e){t.props.dispatch(At(t.props.id))},t}return Object(p.a)(n,[{key:"render",value:function(){var t=Object(g.jsx)(zt,{id:""+this.props.id,blockId:this.props.id,cv:!1,data:this.props.data,active:!1},""+this.props.id);return Object(g.jsxs)("li",{className:"template-panel__block "+this.props.transitionClass,children:[Object(g.jsx)("div",{className:"template-panel__block-view",children:t}),Object(g.jsx)("button",{className:"template-panel__block-add",onClick:this.onClickAdd}),this.props.custom&&Object(g.jsx)("button",{className:"template-panel__button-delete",onClick:this.onClickDelete})]})}}]),n}(o.a.PureComponent),Gt=Object(c.b)()(Ht),Wt=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).onClick=function(){t.props.cbSelected(t.props.id)},t}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("li",{className:"template-panel__group"+(this.props.custom?" template-panel__group--user":""),children:[Object(g.jsx)("div",{className:"template-panel__group-name"+(this.props.active?" template-panel__group-name--active":""),onClick:this.onClick,children:this.props.data.name}),Object(g.jsx)("ul",{children:this.props.data.elements.map((function(e,n){return Object(g.jsx)(f.a,{in:t.props.active,unmountOnExit:!0,timeout:{enter:50*(n+1),exit:50*(n+1)},children:function(a){return Object(g.jsx)(Gt,{id:n,data:e,custom:t.props.custom,transitionClass:a},n)}},n)}))})]})}}]),n}(o.a.PureComponent),Jt=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={activeMenuId:null},t.selectMenu=function(e){t.setState({activeMenuId:e===t.state.activeMenuId?null:e})},t}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e=!!this.props.templatesUser&&this.props.templatesUser.length>0,n=this.props.templates.map((function(e,n){return Object(g.jsx)(Wt,{id:n,data:e,active:t.state.activeMenuId===n,cbSelected:t.selectMenu},n)}));return Object(g.jsxs)("ul",{className:"template-panel__menu "+this.props.transitionClass,children:[n,e&&Object(g.jsx)(Wt,{id:n.length+1,data:{name:"Your templates",elements:this.props.templatesUser},custom:!0,active:this.state.activeMenuId===n.length+1,cbSelected:this.selectMenu},n.length+1)]})}}]),n}(o.a.PureComponent),Yt=Object(c.b)((function(t){return{templates:t.cvData.templates,templatesUser:t.cvData.templatesUser}}))(Jt),Xt=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).blockRef=o.a.createRef(),t.onClick=function(e){if(e.ctrlKey||e.shiftKey)e.preventDefault(),t.props.dispatch(xt(t.props.id));else{var n=e.target.getAttribute("data-elem");e.preventDefault(),t.props.dispatch(mt(t.props.id,e.currentTarget,n))}},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.newBlock&&this.props.dispatch(mt(this.props.id,this.blockRef.current))}},{key:"render",value:function(){var t=this,e={top:this.props.data.positionTop+"px",left:this.props.data.positionLeft+"px",width:this.props.data.width+"px",height:this.props.data.height+"px"},n="cv__block"+(this.props.activeIndex>=0?" cv__block--active":"")+(0===this.props.activeIndex?" cv__block--active-first":"")+(this.props.data.lock?" cv__block--lock":""),a=Object(g.jsx)(zt,{id:""+this.props.id,blockId:this.props.id,editable:this.props.editable,data:this.props.data,activeElementId:this.props.activeElementId});return Object(g.jsx)(f.a,{in:!0,unmountOnExit:!0,timeout:{enter:1e3,exit:1e3},children:function(o){return Object(g.jsx)("div",{className:n+" "+o,style:e,onClick:t.onClick,ref:t.blockRef,children:a})}})}}]),n}(o.a.PureComponent),Zt=Object(c.b)((function(t){return{newBlock:t.cvData.newBlock}}))(Xt),Qt=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).resize=!1,t.state={shiftTop:t.props.cv.offsetTop,shiftLeft:t.props.cv.offsetLeft,shiftBorder:4},t.setPosition=function(){t.setState({shiftTop:t.props.cv.offsetTop,shiftLeft:t.props.cv.offsetLeft})},t.move=function(e){e.preventDefault(),t.mouseStart={x:e.clientX,y:e.clientY},t.elem=e.currentTarget.parentNode,document.addEventListener("mousemove",t.onMouseMove),document.addEventListener("mouseup",t.onMouseUp)},t.onMouseMove=function(e){e.preventDefault(),t.mouseShift={x:e.clientX-t.mouseStart.x,y:e.clientY-t.mouseStart.y},t.mouseStart={x:e.clientX,y:e.clientY},t.resize?t.props.dispatch(jt(t.props.block.id,t.mouseShift.y,t.mouseShift.x)):t.props.dispatch(ft(t.props.block.id,t.mouseShift.y,t.mouseShift.x))},t.onMouseUp=function(e){e.preventDefault(),document.removeEventListener("mousemove",t.onMouseMove),document.removeEventListener("mouseup",t.onMouseUp)},t.onMouseDown=function(e){t.resize=!1,t.move(e)},t.onMouseDownSize=function(e){t.resize=!0,t.move(e)},t.onClickDelete=function(){t.props.dispatch(ht(t.props.block.id))},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setPosition)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setPosition)}},{key:"componentDidUpdate",value:function(){this.setPosition()}},{key:"render",value:function(){if(!this.props.block)return null;var t={top:this.props.block.positionTop+this.state.shiftTop-this.state.shiftBorder+"px",left:this.props.block.positionLeft+this.state.shiftLeft-this.state.shiftBorder+"px",width:this.props.block.width+2*this.state.shiftBorder+"px",height:this.props.block.height+2*this.state.shiftBorder+"px"},e="transform "+this.props.transitionClass+(this.props.block.lock?" transform--locked":"")+(this.props.block.link?" transform--linked":"");return Object(g.jsx)("div",{className:e,style:t,children:!this.props.block.lock&&Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("button",{className:"transform__button transform__button--move",onMouseDown:this.onMouseDown}),Object(g.jsx)("button",{className:"transform__button transform__button--delete",onClick:this.onClickDelete}),Object(g.jsx)("button",{className:"transform__button transform__button--resize",onMouseDown:this.onMouseDownSize})]})})}}]),n}(o.a.PureComponent),qt=Object(c.b)((function(t){return{}}))(Qt),$t=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).onClick=function(e){e.target===e.currentTarget&&t.props.dispatch(mt(null,null))},t}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e=this.props.blocks.map((function(e){var n=t.props.activeBlocksId.findIndex((function(t){return t===e.id}));return Object(g.jsx)(Zt,{id:e.id,data:e,activeIndex:n,activeElementId:n>=0?t.props.activeElementId:null,editable:!0},e.id)}));return Object(g.jsxs)("div",{className:"cv-container",children:[this.props.activeBlock&&this.cv&&Object(g.jsx)(f.a,{in:this.props.showPanel,timeout:{enter:1e3,exit:1e3},children:function(e){return Object(g.jsx)(qt,{block:t.props.activeBlock,cv:t.cv,transitionClass:e})}}),Object(g.jsx)("div",{className:"cv",style:w(this.props.stylePage),onClick:this.onClick,ref:function(e){return t.cv=e},children:e})]})}}]),n}(o.a.PureComponent),te=Object(c.b)((function(t){return{blocks:t.cvData.blocks,activeBlocksId:t.cvData.activeBlocksId,activeElementId:t.cvData.activeElementId}}))($t),ee=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"loader "+this.props.transitionClass,children:[Object(g.jsx)("span",{className:"loader__text",children:this.props.text}),Object(g.jsx)("i",{className:"loader__layer loader__layer--1"}),Object(g.jsx)("i",{className:"loader__layer loader__layer--2"}),Object(g.jsx)("i",{className:"loader__layer loader__layer--3"})]})}}]),n}(o.a.PureComponent),ne=n.p+"static/media/image.51674aa9.svg",ae=n(26);n(49),n(51);ae.a.initializeApp({apiKey:"AIzaSyAq9TFZvy9lyxxV3vrJXGXT5M_Ivwf7-RY",authDomain:"creacv-a2bd7.firebaseapp.com",projectId:"creacv-a2bd7",storageBucket:"creacv-a2bd7.appspot.com",messagingSenderId:"1093581926352",appId:"1:1093581926352:web:7d1b8619531df14b8253d5",measurementId:"G-08QQHJN47T"});var oe=ae.a.firestore();function ie(t,e,n){oe.collection(t).doc(e).set(n).then((function(){})).catch((function(t){}))}function re(t,e,n,a){return ce.apply(this,arguments)}function ce(){return(ce=Object(v.a)(m.a.mark((function t(e,n,a,o){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:oe.collection(e).doc(n).get().then((function(t){t.exists&&oe.collection(e).doc(n).set(Object(Ft.a)({},a,!0),{merge:!0}).then((function(){o()}))})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function se(t,e,n){return le.apply(this,arguments)}function le(){return(le=Object(v.a)(m.a.mark((function t(e,n,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:oe.collection(e).doc(n).get().then((function(t){t.exists?a(t.data()):a(!1)})).catch((function(t){}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ue=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={userName:null,userList:{},dataloaded:!1,userNameValid:!0,messageError:""},t.loadData=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(t){se("Data","users",t)})),e.next=3,n.then((function(e){t.setState({dataloaded:!0,userList:e})}));case 3:case"end":return e.stop()}}),e)}))),t.saveData=function(){var e=Object(v.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(t){re("Data","users",n,t)})),e.next=3,a.then((function(){t.setState({userNameValid:!0,messageError:""}),T("CV",{user:n}),t.props.dispatch(St(n))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onSubmit=function(e){e.preventDefault();var n=t.name.value;if(0===String(n).trim().length)return t.setState({userNameValid:!1,messageError:"Enter name"}),void t.name.focus();n in t.state.userList?(t.setState({userNameValid:!1,messageError:"This name is not available"}),t.name.focus()):t.saveData(t.name.value)},t.onChange=function(e){var n=t.name.value;if(String(n).trim().length>0)return t.setState({userNameValid:!0,messageError:""}),void e.preventDefault()},t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var t=this;return this.state.dataloaded||(f.a,this.state.dataReady),Object(g.jsxs)("form",{className:"cv__login "+this.props.transitionClass+(this.state.userNameValid?"":" cv__login--error"),name:"login",onSubmit:this.onSubmit,children:[Object(g.jsx)("input",{type:"text",name:"name",maxLength:"30",placeholder:"Enter name of your CV...",ref:function(e){return t.name=e},onChange:this.onChange}),Object(g.jsx)("button",{type:"submit"}),!this.state.userNameValid&&Object(g.jsx)("span",{children:this.state.messageError})]})}}]),n}(o.a.PureComponent),pe=Object(c.b)()(ue),de=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={showPanel:!0},t.saveCV=function(){var e={style:t.props.stylePage,blocks:t.props.blocks};N(e,"CV",".json"),T("CV",e)},t.saveLS=function(){T("CV",{style:t.props.stylePage,blocks:t.props.blocks})},t.loadCV=function(){var e=Object(v.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(n.target.files[0]);case 2:a=e.sent,t.props.dispatch(Tt(a.blocks,a.style)),T("CV",{style:a.style,blocks:a.blocks}),n.target.value=null;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.showPanel=function(){t.setState({showPanel:!t.state.showPanel})},t}return Object(p.a)(n,[{key:"render",value:function(){if(console.log("render cv"),!this.props.user)return Object(g.jsx)(f.a,{in:!this.props.user,unmountOnExit:!0,timeout:{enter:1e3,exit:1e3},children:function(t){return Object(g.jsx)(pe,{transitionClass:t})}});var t,e=1===this.props.activeBlocksId.length&&this.props.activeBlocksId[0],n=null;return e&&(t={id:(n=this.props.blocks.find((function(t){return t.id===e}))).id,lock:n.lock,link:n.link,list:n.list,group:n.group}),Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsxs)("header",{className:"header "+this.props.transitionClass,children:[Object(g.jsx)("span",{className:"header__logo",children:"Create your CV"}),Object(g.jsxs)("ul",{className:"header__menu",children:[Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)("button",{className:"header__button header__button--save",onClick:this.saveCV,children:"Save"})}),Object(g.jsxs)("li",{className:"header__menu-item",children:[Object(g.jsx)("input",{type:"file",name:"file-cv",id:"file-cv",className:"option__file",accept:"text/*",onChange:this.loadCV}),Object(g.jsx)("label",{className:"header__button header__button--load",htmlFor:"file-cv","data-tooltip":!0,children:"Load"})]}),Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)(l.b,{to:"/view",className:"header__button header__button--show",onClick:this.saveLS,children:"Show"})})]})]}),Object(g.jsxs)("main",{className:"main "+this.props.transitionClass,children:[Object(g.jsxs)("div",{className:"template-panel",children:[Object(g.jsx)(f.a,{in:this.state.showPanel,unmountOnExit:!0,timeout:{enter:500,exit:500},children:function(t){return Object(g.jsx)(Yt,{transitionClass:t})}}),this.state.showPanel&&null,Object(g.jsx)("button",{className:"template-panel__button-hide",onClick:this.showPanel})]}),Object(g.jsxs)("div",{className:"desk",children:[Object(g.jsx)(Ut,{activeBlockOptions:t}),Object(g.jsx)(te,{activeBlock:n,stylePage:this.props.stylePage,showPanel:this.state.showPanel})]})]})]})}}]),n}(o.a.PureComponent),be=Object(c.b)((function(t){return{stylePage:t.cvData.stylePage,blocks:t.cvData.blocks,activeBlocksId:t.cvData.activeBlocksId,user:t.cvData.user}}))(de),he=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(g.jsx)(f.a,{in:!0,unmountOnExit:!0,timeout:{enter:500,exit:500},children:function(t){return Object(g.jsx)(be,{transitionClass:t})}})}}]),n}(o.a.PureComponent),fe=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={viewForPrint:!1},t.viewForPrint=function(){t.setState({viewForPrint:!t.state.viewForPrint})},t.createLink=Object(v.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props.user,a={style:t.props.stylePage,blocks:t.props.blocks},ie("Links",n,a),T("CV",{link:n}),t.props.dispatch(Pt(n));case 5:case"end":return e.stop()}}),e)}))),t.updateLink=Object(v.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props.user,a={style:t.props.stylePage,blocks:t.props.blocks},ie("Links",n,a);case 3:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(n,[{key:"render",value:function(){var t,e=this.props.blocks.map((function(t){return Object(g.jsx)(Zt,{id:t.id,data:t,editable:!1},t.id)}));return t=this.props.link?Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)("button",{className:"header__button header__button--link-update",onClick:this.updateLink,children:"Update link"})}),Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsxs)(l.b,{to:"/"+this.props.link,className:"header__button header__button--show",target:"_blank",children:["Open link (",this.props.link,")"]})})]}):Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)("button",{className:"header__button header__button--link-create",onClick:this.createLink,children:"Create Link"})}),Object(g.jsxs)(o.a.Fragment,{children:[!this.state.viewForPrint&&Object(g.jsx)("header",{className:"header "+this.props.transitionClass,children:Object(g.jsxs)("ul",{className:"header__menu",children:[Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)("button",{className:"header__button header__button--print",onClick:this.viewForPrint,children:"View for print"})}),Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)(l.b,{to:"/",className:"header__button header__button--edit",children:"Back to edit"})}),t]})}),Object(g.jsxs)("main",{className:"main "+this.props.transitionClass,children:[this.state.viewForPrint&&Object(g.jsxs)("div",{className:"header__print no-print",children:[Object(g.jsx)("span",{children:"You can save this page to PDF-file. Open a webpage in Chrome, press Ctrl+P to open the Print dialog and change the destination printer to \u201cSave as PDF\u201d. Hit the \u201cPrint\u201d button and the webpage will download as a PDF document"}),Object(g.jsx)(l.b,{to:"/",className:"header__button header__button--edit",children:"Back to edit"})]}),Object(g.jsx)("div",{className:"cv-view",children:Object(g.jsx)("div",{className:"cv",style:w(this.props.stylePage),children:e})})]})]})}}]),n}(o.a.PureComponent),je=Object(h.e)(Object(c.b)((function(t){return{blocks:t.cvData.blocks,stylePage:t.cvData.stylePage,user:t.cvData.user,link:t.cvData.link}}))(fe)),me=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(g.jsx)(f.a,{in:!0,unmountOnExit:!0,timeout:{enter:500,exit:500},children:function(t){return Object(g.jsx)(je,{transitionClass:t})}})}}]),n}(o.a.PureComponent),ve=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={blocks:[],stylePage:null},t.loadLink=function(){var e=Object(v.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(t){se("Links",n,t)})),e.next=3,a.then((function(e){t.setState({blocks:e.blocks,stylePage:e.style})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.linkname;t&&this.loadLink(t)}},{key:"render",value:function(){if(!this.state.blocks)return null;var t=this.state.blocks.map((function(t){return Object(g.jsx)(Zt,{id:t.id,data:t,editable:!1},t.id)}));return Object(g.jsx)(o.a.Fragment,{children:Object(g.jsx)("main",{className:"main",children:Object(g.jsx)("div",{className:"cv-view",children:Object(g.jsx)("div",{className:"cv cv--link",style:w(this.state.stylePage),children:t})})})})}}]),n}(o.a.PureComponent),Oe=Object(h.e)(ve),ke=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(g.jsx)(Oe,{})}}]),n}(o.a.PureComponent),ge=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(o.a.Fragment,{children:[Object(g.jsx)(h.a,{path:"/",exact:!0,component:he}),Object(g.jsx)(h.a,{path:"/view",component:me}),Object(g.jsx)(h.a,{path:"/:linkname",component:ke})]})}}]),n}(o.a.Component),_e={user:null,link:null,stylePage:{bgcolor:"#ffffff"},blocks:[],activeBlockDOM:null,activeBlocksId:[],activeElementId:null,styleToEdit:{},showPanel:!0,newBlock:!1,templates:[],templatesUser:[],templateImageUrl:null};var ye=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.1;switch(e.type){case D:{function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.id=e?e+"-"+n:o,t.elements&&t.elements.forEach((function(e,n){return a(e,t.id,n)}))}var o=t.blocks.reduce((function(t,e){return t<e.id?e.id:t}),0)+1,i=50+100*Math.random(),r=Object(k.a)(Object(k.a)({},e.block),{},{positionTop:i,positionLeft:i});a(r);var c=Object(k.a)(Object(k.a)({},t),{},{blocks:[].concat(Object(O.a)(t.blocks),[r]),activeBlocksId:[o],activeBlockDOM:null,activeElementId:null,newBlock:!0});return c}case V:var s=Object(k.a)(Object(k.a)({},t),{},{blocks:t.blocks.filter((function(t){return t.id!==e.blockId})),activeBlocksId:[],activeBlockDOM:null,activeElementId:null,newBlock:!1});return s;case A:var l=t.blocks.map((function(t){return t.id===e.blockId?(t.positionTop=Number(t.positionTop)+e.shiftTop,t.positionLeft=Number(t.positionLeft)+e.shiftLeft,Object(k.a)({},t)):t})),u=Object(k.a)(Object(k.a)({},t),{},{blocks:l,newBlock:!1});return u;case M:var p=t.blocks.map((function(t){return t.id===e.blockId?(t.height=Number(t.height)+e.shiftHeight,t.width=Number(t.width)+e.shiftWidth,Object(k.a)({},t)):t})),d=Object(k.a)(Object(k.a)({},t),{},{blocks:p,newBlock:!1});return d;case U:console.log("activate block");var b=[];e.blockId&&b.push(e.blockId);var h=Object(k.a)(Object(k.a)({},t),{},{activeBlocksId:b,activeBlockDOM:e.target,activeElementId:e.activeElem?t.activeElementId:null,newBlock:!1});return h;case F:var f=[].concat(Object(O.a)(t.activeBlocksId),[e.blockId]),j=Object(k.a)(Object(k.a)({},t),{},{activeBlocksId:f,activeBlockDOM:null,activeElementId:null,newBlock:!1});return j;case J:var m=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),v=m.positionTop,g=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.positionTop=v,Object(k.a)({},e)):e})),_=Object(k.a)(Object(k.a)({},t),{},{blocks:g});return _;case Y:var y=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),x=y.positionTop+y.height,C=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.positionTop=x-e.height,Object(k.a)({},e)):e})),w=Object(k.a)(Object(k.a)({},t),{},{blocks:C});return w;case X:var I=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),N=I.positionLeft,L=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.positionLeft=N,Object(k.a)({},e)):e})),B=Object(k.a)(Object(k.a)({},t),{},{blocks:L});return B;case Z:var T=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),E=T.positionLeft+T.width,S=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.positionLeft=E-e.width,Object(k.a)({},e)):e})),P=Object(k.a)(Object(k.a)({},t),{},{blocks:S});return P;case Q:var bt=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),ht=bt.positionLeft+bt.width/2,ft=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.positionLeft=ht-e.width/2,Object(k.a)({},e)):e})),jt=Object(k.a)(Object(k.a)({},t),{},{blocks:ft});return jt;case q:var mt=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),vt=mt.positionTop+mt.height/2,Ot=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.positionTop=vt-e.height/2,Object(k.a)({},e)):e})),kt=Object(k.a)(Object(k.a)({},t),{},{blocks:Ot});return kt;case et:var gt=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),_t=gt.width,yt=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.width=_t,Object(k.a)({},e)):e})),xt=Object(k.a)(Object(k.a)({},t),{},{blocks:yt});return xt;case nt:var Ct=t.blocks.find((function(e){return e.id===t.activeBlocksId[0]})),wt=Ct.height,It=t.blocks.map((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))?(e.height=wt,Object(k.a)({},e)):e})),Nt=Object(k.a)(Object(k.a)({},t),{},{blocks:It});return Nt;case $:var Lt=t.blocks.filter((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))})).sort((function(t,e){return t.positionTop-e.positionTop})),Bt=Lt[0].positionTop+Lt[0].height,Tt=Lt[Lt.length-1].positionTop,Et=(Lt=Lt.slice(1,Lt.length-1)).reduce((function(t,e){return t+e.height}),0),St=(Tt-Bt-Et)/(Lt.length+1);Lt=Lt.map((function(t){return t.positionTop=Bt+St,Bt=t.positionTop+t.height,t}));var Pt=t.blocks.map((function(t){var e=Lt.find((function(e){return t.id===e.id}));return e?Object(k.a)({},e):t})),Dt=Object(k.a)(Object(k.a)({},t),{},{blocks:Pt});return Dt;case tt:var Vt=t.blocks.filter((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))})).sort((function(t,e){return t.positionLeft-e.positionLeft})),At=Vt[0].positionLeft+Vt[0].width,Mt=Vt[Vt.length-1].positionLeft,Ut=(Vt=Vt.slice(1,Vt.length-1)).reduce((function(t,e){return t+e.width}),0),Ft=(Mt-At-Ut)/(Vt.length+1);Vt=Vt.map((function(t){return t.positionLeft=At+Ft,At=t.positionLeft+t.width,t}));var Kt=t.blocks.map((function(t){var e=Vt.find((function(e){return t.id===e.id}));return e?Object(k.a)({},e):t})),Rt=Object(k.a)(Object(k.a)({},t),{},{blocks:Kt});return Rt;case at:var zt=t.blocks.filter((function(e){return t.activeBlocksId.find((function(t){return e.id===t}))})),Ht=1/0,Gt=0,Wt=1/0,Jt=0;zt.forEach((function(t){Ht=t.positionTop<Ht?t.positionTop:Ht,Gt=t.positionTop+t.height>Gt?t.positionTop+t.height:Gt,Wt=t.positionLeft<Wt?t.positionLeft:Wt,Jt=t.positionLeft+t.width>Jt?t.positionLeft+t.width:Jt}));var Yt=zt.map((function(t){var e=t.width,n=t.height,a=t.positionTop-Ht,o=t.positionLeft-Wt;return delete t.positionTop,delete t.positionLeft,Object(k.a)(Object(k.a)({},t),{},{style:Object(k.a)(Object(k.a)({},t.style),{},{position:"absolute",width:e,height:n,top:a,left:o})})})),Xt=t.blocks.reduce((function(t,e){return t<e.id?e.id:t}),0)+1,Zt={type:"group",group:!0,direction:"absolute",id:Xt,height:Gt-Ht,width:Jt-Wt,positionTop:Ht,positionLeft:Wt};Zt.elements=Yt;var Qt=t.blocks.filter((function(e){return!t.activeBlocksId.find((function(t){return e.id===t}))})),qt=Object(k.a)(Object(k.a)({},t),{},{blocks:[].concat(Object(O.a)(Qt),[Zt]),activeBlocksId:[Xt],activeBlockDOM:null,activeElementId:null});return qt;case ot:var $t=t.blocks.find((function(t){return t.id===e.blockId})),te=$t.positionTop,ee=$t.positionLeft,ne=$t.elements.map((function(e,n){var a=t.blocks.reduce((function(t,e){return t<e.id?e.id:t}),0)+1+n,o=te+e.style.top,i=ee+e.style.left;return delete e.style.top,delete e.style.left,delete e.style.width,delete e.style.height,delete e.style.position,Object(k.a)(Object(k.a)({},e),{},{id:a,positionTop:o,positionLeft:i})})),ae=Object(k.a)(Object(k.a)({},t),{},{blocks:[].concat(Object(O.a)(t.blocks.filter((function(t){return t.id!==e.blockId}))),Object(O.a)(ne)),activeBlocksId:[],activeBlockDOM:null,activeElementId:null});return ae;case W:var oe=function(t,n){return t.id===e.blockId?-1:n.id===e.blockId?1:0},re=Object(O.a)(t.blocks).sort(oe),ce=Object(k.a)(Object(k.a)({},t),{},{blocks:re,activeBlocksId:[],activeBlockDOM:null,activeElementId:null});return ce;case K:{function se(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=Object(k.a)(Object(k.a)({},t),{},{style:Object(k.a)({},t.style)});return a.id=e?e+"-"+n:le,a.elements&&(a.elements=a.elements.map((function(t,e){return se(t,a.id,e)}))),a}var le=t.blocks.reduce((function(t,e){return t<e.id?e.id:t}),0)+1,ue=t.blocks.find((function(t){return t.id===e.blockId})),pe=se(ue);pe.positionTop=ue.positionTop+30,pe.positionLeft=ue.positionLeft+30;var de=Object(k.a)(Object(k.a)({},t),{},{blocks:[].concat(Object(O.a)(t.blocks),[pe]),activeBlocksId:[le],activeBlockDOM:null,activeElementId:null});return de}case R:var be=t.blocks.map((function(t){return t.id===e.blockId?(t.height=Number(e.height),t.width=Number(e.width),Object(k.a)({},t)):t})),he=Object(k.a)(Object(k.a)({},t),{},{blocks:be});return he;case it:var fe=t.blocks.map((function(t){return t.id===e.blockId?(t.lock=!t.lock,Object(k.a)({},t)):t})),je=Object(k.a)(Object(k.a)({},t),{},{blocks:fe});return je;case ut:var me=t.blocks.map((function(t){return t.id===e.blockId?(t.link=e.linkValue,Object(k.a)({},t)):t})),ve=Object(k.a)(Object(k.a)({},t),{},{blocks:me});return ve;case z:if(console.log("activate element"),t.activeElementId!==e.elementId){var Oe=Object(k.a)(Object(k.a)({},t),{},{activeElementId:e.elementId,styleToEdit:e.style});return Oe}return t;case H:{function ke(n){return n.id==t.activeElementId?(n.style[e.styleName]=e.styleValue,n.style=Object(k.a)({},n.style),ye=n.style,Object(k.a)({},n)):n.elements?(n.elements=n.elements.map((function(t){return ke(t)})),Object(k.a)({},n)):n}if(e.blockId===n){t.stylePage[e.styleName]=e.styleValue;var ge=Object(k.a)(Object(k.a)({},t),{},{stylePage:Object(k.a)({},t.stylePage)});return ge}var ye={},xe=t.blocks.map((function(t){return t.id===e.blockId?ke(t):t})),Ce=Object(k.a)(Object(k.a)({},t),{},{blocks:xe,styleToEdit:ye});return Ce}case G:{function we(n){return n.id==t.activeElementId?(n.text=e.textValue,Object(k.a)({},n)):n.elements?(n.elements=n.elements.map((function(t){return we(t)})),Object(k.a)({},n)):n}var Ie=t.blocks.map((function(t){return t.id===e.blockId?we(t):t})),Ne=Object(k.a)(Object(k.a)({},t),{},{blocks:Ie});return Ne}case rt:var Le=Object(k.a)(Object(k.a)({},t),{},{stylePage:e.style,blocks:e.blocks});return Le;case ct:var Be=Object(k.a)(Object(k.a)({},t),{},{user:e.user,templates:e.templatesData.templates,templateImageUrl:e.templatesData.image,templatesUser:e.templatesUser});return e.style&&(Be.stylePage=e.style),e.blocks&&(Be.blocks=e.blocks),e.link&&(Be.link=e.link),Be;case st:var Te=Object(k.a)(Object(k.a)({},t),{},{user:e.user});return Te;case lt:var Ee=Object(k.a)(Object(k.a)({},t),{},{link:e.link});return Ee;case pt:var Se=t.blocks.find((function(t){return t.id===e.blockId})),Pe={type:Se.type,style:Object(k.a)(Object(k.a)({},Se.style),{},{height:Se.height})};Se.text&&(Pe.text=Se.text),Se.elements&&(Pe.elements=Object(O.a)(Se.elements)),Se.direction&&(Pe.direction=Se.direction),Se.group&&(Pe.group=Se.group);var De=Object(k.a)(Object(k.a)({},t),{},{templatesUser:[].concat(Object(O.a)(t.templatesUser),[Pe])});return ie("Templates",t.user,{templates:De.templatesUser}),De;case dt:var Ve=Object(k.a)(Object(k.a)({},t),{},{templatesUser:t.templatesUser.filter((function(t,n){return n!==e.index}))});return ie("Templates",t.user,{templates:Ve.templatesUser}),Ve;default:return t}},xe=Object(s.b)({cvData:ye}),Ce=(n(53),Object(s.c)(xe));var we=function(){var t,e=function(e){var n=function(n){Object(d.a)(o,n);var a=Object(b.a)(o);function o(){var e;Object(u.a)(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=a.call.apply(a,[this].concat(i))).state={dataReady:!1,combinedProps:null},e.loadData=Object(v.a)(m.a.mark((function n(){var a,o,i,r,c,s,l,u,p;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],c={},s=[],l=new Promise((function(t){t(E("CV"))})),n.next=6,l.then((function(t){t&&(i=t.blocks,r=t.style,a=t.user,o=t.link)}));case 6:return u=new Promise((function(t){se("Data","templates",t)})),n.next=9,u.then((function(t){t&&(c.templates=t.templates,c.image=ne)}));case 9:if(!a){n.next=13;break}return p=new Promise((function(t){se("Templates",a,t)})),n.next=13,p.then((function(t){t&&(s=t.templates)}));case 13:e.props.dispatch(Et(i,r,a,o,c,s)),setTimeout((function(){return e.setState({dataReady:!0,combinedProps:Object(k.a)(Object(k.a)({},e.props),{},Object(Ft.a)({},t,""))})}),500);case 15:case"end":return n.stop()}}),n)}))),e}return Object(p.a)(o,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){return this.state.dataReady?Object(g.jsx)(e,Object(k.a)({},this.state.combinedProps)):Object(g.jsx)(f.a,{in:!0,unmountOnExit:!0,timeout:{enter:1e3,exit:1e3},children:function(t){return Object(g.jsx)(ee,{transitionClass:t,text:"Loaded"})}})}}]),o}(o.a.PureComponent);return Object(c.b)()(n)}(ge);return Object(g.jsx)(l.a,{children:Object(g.jsx)(c.a,{store:Ce,children:Object(g.jsx)(e,{})})})},Ie=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),o(t),i(t),r(t)}))};r.a.render(Object(g.jsx)(we,{}),document.getElementById("app")),Ie()}},[[54,1,2]]]);
//# sourceMappingURL=main.f61ac252.chunk.js.map